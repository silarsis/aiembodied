
> aiembodied@0.0.1 test C:\Users\kevin\repos\aiembodied
> pnpm -r test

Scope: 2 of 3 workspace projects
app/renderer test$ vitest run
app/main test$ npm run test:rebuild && node scripts/test-split.mjs
app/main test: > @aiembodied/main@0.0.1 test:rebuild
app/main test: > node scripts/test-rebuild.mjs
app/renderer test: [1m[43m DEPRECATED [49m[22m [33m"environmentMatchGlobs" is deprecated. Use `test.projects` to define different configurations instead.[39m
app/renderer test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/renderer[39m
app/main test: .../node_modules/better-sqlite3 install$ prebuild-install || node-gyp rebuild --release
app/main test: .../node_modules/better-sqlite3 install: Done
app/renderer test:  [32mâœ“[39m tests/realtime/realtime-client.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 30[2mms[22m[39m
app/renderer test:  [32mâœ“[39m tests/avatar/idle-scheduler.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 19[2mms[22m[39m
app/renderer test: [90mstderr[2m | tests/avatar/vrm-avatar-renderer.test.tsx[2m > [22m[2mcreateRightArmWaveClip[2m > [22m[2mreturns null when humanoid mapping is missing
app/renderer test: [22m[39m[vrm-avatar-renderer] VRM humanoid is unavailable; cannot create wave animation clip.
app/renderer test: [90mstderr[2m | tests/avatar/vrm-avatar-renderer.test.tsx[2m > [22m[2msuppressOutlierMeshes[2m > [22m[2mhides meshes that exceed the max world-space size
app/renderer test: [22m[39m[vrm-avatar-renderer] Hiding oversized mesh { name: [32m''[39m, maxDim: [33m200[39m }
app/renderer test: [90mstdout[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2mqueues animations sequentially
app/renderer test: [22m[39m[vrm-avatar-renderer] T-pose detection result: [33mfalse[39m
app/renderer test: [vrm-avatar-renderer] Model not in T-pose, skipping relaxed pose adjustment
app/renderer test: [vrm-avatar-renderer] VRM scene metrics {"modelId":"vrm-1","meshCount":0,"skinnedMeshCount":0,"hiddenMeshes":0,"bounds":null,"head":null}
app/renderer test: [90mstderr[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2mqueues animations sequentially
app/renderer test: [22m[39m[vrm-avatar-renderer] Pose API unavailable, skipping default pose save
app/renderer test: [90mstderr[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2mqueues animations sequentially
app/renderer test: [22m[39m[vrm-avatar-renderer] Missing right arm bones; skipping wave animation setup.
app/renderer test: [90mstdout[2m | tests/avatar/vrm-avatar-renderer.test.tsx[2m > [22m[2mVrmAvatarRenderer behavior cues[2m > [22m[2mplays a wave animation when a greet_face cue is emitted
app/renderer test: [22m[39m[vrm-avatar-renderer] T-pose detection result: [33mfalse[39m
app/renderer test: [vrm-avatar-renderer] Model not in T-pose, skipping relaxed pose adjustment
app/renderer test: [vrm-avatar-renderer] VRM scene metrics {"modelId":"vrm-1","meshCount":0,"skinnedMeshCount":0,"hiddenMeshes":0,"bounds":null,"head":null}
app/renderer test: [90mstderr[2m | tests/avatar/vrm-avatar-renderer.test.tsx[2m > [22m[2mVrmAvatarRenderer behavior cues[2m > [22m[2mplays a wave animation when a greet_face cue is emitted
app/renderer test: [22m[39m[vrm-avatar-renderer] Pose API unavailable, skipping default pose save
app/renderer test: [90mstdout[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2minvokes timing callbacks when starting playback
app/renderer test: [22m[39m[vrm-avatar-renderer] T-pose detection result: [33mfalse[39m
app/renderer test: [vrm-avatar-renderer] Model not in T-pose, skipping relaxed pose adjustment
app/renderer test: [vrm-avatar-renderer] VRM scene metrics {"modelId":"vrm-1","meshCount":0,"skinnedMeshCount":0,"hiddenMeshes":0,"bounds":null,"head":null}
app/renderer test: [90mstderr[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2minvokes timing callbacks when starting playback
app/renderer test: [22m[39m[vrm-avatar-renderer] Pose API unavailable, skipping default pose save
app/renderer test: [90mstderr[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2minvokes timing callbacks when starting playback
app/renderer test: [22m[39m[vrm-avatar-renderer] Missing right arm bones; skipping wave animation setup.
app/renderer test: [90mstdout[2m | tests/avatar/vrm-avatar-renderer.test.tsx[2m > [22m[2mVrmAvatarRenderer behavior cues[2m > [22m[2mplays a wave animation when a greet_face cue is emitted
app/renderer test: [22m[39m[vrm-avatar-renderer] greet_face cue triggered wave animation. { source: [32m'camera'[39m }
app/renderer test:  [32mâœ“[39m tests/avatar/vrm-avatar-renderer.test.tsx [2m([22m[2m9 tests[22m[2m)[22m[32m 159[2mms[22m[39m
app/renderer test: [90mstdout[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2mholds pose animations on the final frame
app/renderer test: [22m[39m[vrm-avatar-renderer] T-pose detection result: [33mfalse[39m
app/renderer test: [vrm-avatar-renderer] Model not in T-pose, skipping relaxed pose adjustment
app/renderer test: [vrm-avatar-renderer] VRM scene metrics {"modelId":"vrm-1","meshCount":0,"skinnedMeshCount":0,"hiddenMeshes":0,"bounds":null,"head":null}
app/renderer test: [90mstderr[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2mholds pose animations on the final frame
app/renderer test: [22m[39m[vrm-avatar-renderer] Pose API unavailable, skipping default pose save
app/renderer test: [90mstderr[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2mholds pose animations on the final frame
app/renderer test: [22m[39m[vrm-avatar-renderer] Missing right arm bones; skipping wave animation setup.
app/renderer test: [90mstderr[2m | tests/avatar/avatar-renderers.smoke.test.tsx[2m > [22m[2mavatar renderer smoke tests[2m > [22m[2mmounts the VRM renderer when a model is available
app/renderer test: [22m[39m[vrm-avatar-renderer] failed to load VRM model TypeError: chestWorldPos.sub is not a function
app/renderer test:     at isInTPose [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\vrm-avatar-renderer.tsx:602:34[90m)[39m
app/renderer test:     at applyRelaxedPose [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\vrm-avatar-renderer.tsx:759:19[90m)[39m
app/renderer test:     at load [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\vrm-avatar-renderer.tsx:1722:9[90m)[39m
app/renderer test: [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
app/renderer test: [90mstderr[2m | tests/avatar/avatar-renderers.smoke.test.tsx[2m > [22m[2mavatar renderer smoke tests[2m > [22m[2mloads the VRM model binary when the component mounts
app/renderer test: [22m[39m[vrm-avatar-renderer] failed to load VRM model TypeError: chestWorldPos.sub is not a function
app/renderer test:     at isInTPose [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\vrm-avatar-renderer.tsx:602:34[90m)[39m
app/renderer test:     at applyRelaxedPose [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\vrm-avatar-renderer.tsx:759:19[90m)[39m
app/renderer test:     at load [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\vrm-avatar-renderer.tsx:1722:9[90m)[39m
app/renderer test: [90m    at runNextTicks (node:internal/process/task_queues:65:5)[39m
app/renderer test: [90m    at processTimers (node:internal/timers:520:9)[39m
app/renderer test:  [32mâœ“[39m tests/avatar/avatar-renderers.smoke.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[33m 638[2mms[22m[39m
app/renderer test: [90mstdout[2m | tests/avatar/avatar-configurator.test.tsx[2m > [22m[2mAvatarConfigurator[2m > [22m[2msubmits a VRMA prompt and reports success
app/renderer test: [22m[39m[avatar configurator] Avatar bridge connected.
app/renderer test: [90mstdout[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2mlooks up clips by slug name
app/renderer test: [22m[39m[vrm-avatar-renderer] T-pose detection result: [33mfalse[39m
app/renderer test: [vrm-avatar-renderer] Model not in T-pose, skipping relaxed pose adjustment
app/renderer test: [vrm-avatar-renderer] VRM scene metrics {"modelId":"vrm-1","meshCount":0,"skinnedMeshCount":0,"hiddenMeshes":0,"bounds":null,"head":null}
app/renderer test: [90mstderr[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2mlooks up clips by slug name
app/renderer test: [22m[39m[vrm-avatar-renderer] Pose API unavailable, skipping default pose save
app/renderer test: [90mstderr[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2mlooks up clips by slug name
app/renderer test: [22m[39m[vrm-avatar-renderer] Missing right arm bones; skipping wave animation setup.
app/renderer test:  [32mâœ“[39m tests/avatar/vrm-animation-queue.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 433[2mms[22m[39m
app/renderer test: [90mstdout[2m | tests/avatar/avatar-configurator.test.tsx[2m > [22m[2mAvatarConfigurator[2m > [22m[2mrenders VRM models with metadata and handles activation and deletion
app/renderer test: [22m[39m[avatar configurator] Avatar bridge connected.
app/renderer test: [90mstderr[2m | tests/avatar/avatar-configurator.test.tsx[2m > [22m[2mAvatarConfigurator[2m > [22m[2mrenders VRM models with metadata and handles activation and deletion
app/renderer test: [22m[39mNot implemented: HTMLCanvasElement's getContext() method: without installing the canvas npm package
app/renderer test: Not implemented: HTMLCanvasElement's getContext() method: without installing the canvas npm package
app/renderer test: THREE.WebGLRenderer: Error creating WebGL context.
app/renderer test: [90mstderr[2m | tests/avatar/avatar-configurator.test.tsx[2m > [22m[2mAvatarConfigurator[2m > [22m[2mrenders VRM models with metadata and handles activation and deletion
app/renderer test: [22m[39m[avatar-configurator] Failed to generate thumbnail for model vrm-2: Error: Error creating WebGL context.
app/renderer test:     at new WebGLRenderer (file:///C:/Users/kevin/repos/aiembodied/node_modules/[4m.pnpm[24m/three@0.182.0/node_modules/[4mthree[24m/build/three.module.js:15921:13)
app/renderer test:     at createOffscreenRenderer [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\thumbnail-generator.ts:21:20[90m)[39m
app/renderer test:     at generateVrmThumbnail [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\thumbnail-generator.ts:117:20[90m)[39m
app/renderer test:     at [90mC:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\avatar-configurator.tsx:152:39
app/renderer test: [90mstderr[2m | tests/avatar/avatar-configurator.test.tsx[2m > [22m[2mAvatarConfigurator[2m > [22m[2mrenders VRM models with metadata and handles activation and deletion
app/renderer test: [22m[39mNot implemented: HTMLCanvasElement's getContext() method: without installing the canvas npm package
app/renderer test: Not implemented: HTMLCanvasElement's getContext() method: without installing the canvas npm package
app/renderer test: THREE.WebGLRenderer: Error creating WebGL context.
app/renderer test: [90mstderr[2m | tests/avatar/avatar-configurator.test.tsx[2m > [22m[2mAvatarConfigurator[2m > [22m[2mrenders VRM models with metadata and handles activation and deletion
app/renderer test: [22m[39m[avatar-configurator] Failed to generate thumbnail for model vrm-2: Error: Error creating WebGL context.
app/renderer test:     at new WebGLRenderer (file:///C:/Users/kevin/repos/aiembodied/node_modules/[4m.pnpm[24m/three@0.182.0/node_modules/[4mthree[24m/build/three.module.js:15921:13)
app/renderer test:     at createOffscreenRenderer [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\thumbnail-generator.ts:21:20[90m)[39m
app/renderer test:     at generateVrmThumbnail [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\thumbnail-generator.ts:117:20[90m)[39m
app/renderer test:     at [90mC:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\avatar-configurator.tsx:152:39
app/renderer test: [90mstdout[2m | tests/avatar/avatar-configurator.test.tsx[2m > [22m[2mAvatarConfigurator[2m > [22m[2muploads a VRM file and surfaces metadata from the main service
app/renderer test: [22m[39m[avatar configurator] Avatar bridge connected.
app/renderer test: [90mstdout[2m | tests/avatar/avatar-configurator.test.tsx[2m > [22m[2mAvatarConfigurator[2m > [22m[2mprevents non-vrm uploads and shows validation error
app/renderer test: [22m[39m[avatar configurator] Avatar bridge connected.
app/renderer test:  [32mâœ“[39m tests/avatar/avatar-configurator.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[33m 1354[2mms[22m[39m
app/renderer test:    [33m[2mâœ“[22m[39m AvatarConfigurator[2m > [22msubmits a VRMA prompt and reports success [33m 586[2mms[22m[39m
app/renderer test:    [33m[2mâœ“[22m[39m AvatarConfigurator[2m > [22mrenders VRM models with metadata and handles activation and deletion [33m 479[2mms[22m[39m
app/main test: ======================================================================
app/main test: Running Config tests...
app/main test: ======================================================================
app/renderer test:  [32mâœ“[39m tests/vite-config.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
app/renderer test:  [32mâœ“[39m tests/audio/viseme-driver.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 12[2mms[22m[39m
app/renderer test:  [32mâœ“[39m tests/metrics/latency-tracker.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
app/renderer test:  [32mâœ“[39m tests/avatar/animation-tags.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
app/renderer test:  [32mâœ“[39m tests/audio/vad-controller.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 5[2mms[22m[39m
app/renderer test:  [32mâœ“[39m tests/audio/metrics.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
app/main test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/main[39m
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mvalidates and returns configuration from environment variables
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m12[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mvalidates and returns configuration from environment variables
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m13[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mvalidates and returns configuration from environment variables
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mtrue[39m,
app/main test:   audioOutputConfigured: [33mtrue[39m,
app/main test:   featureFlagCount: [33m1[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mprefers stored preferences over environment configuration
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m12[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mprefers stored preferences over environment configuration
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m13[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mprefers stored preferences over environment configuration
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mtrue[39m,
app/main test:   audioOutputConfigured: [33mtrue[39m,
app/main test:   featureFlagCount: [33m1[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mfalls back to secret store when environment variable is missing
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key not found in environment. { hasSecretStore: [33mtrue[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mfalls back to secret store when environment variable is missing
app/main test: [22m[39mRealtime API key resolved from secret store. { length: [33m10[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mfalls back to secret store when environment variable is missing
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key not found in environment. { hasSecretStore: [33mtrue[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mfalls back to secret store when environment variable is missing
app/main test: [22m[39mWake word access key resolved from secret store. { length: [33m16[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mfalls back to secret store when environment variable is missing
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mparses comma separated feature flags
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m3[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mparses comma separated feature flags
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m8[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mparses comma separated feature flags
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m3[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mparses metrics configuration from environment variables
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m3[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mparses metrics configuration from environment variables
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m8[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mparses metrics configuration from environment variables
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mthrows a validation error when the wake word access key is missing
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m3[39m }
app/main test: [90mstderr[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mthrows a validation error when the wake word access key is missing
app/main test: [22m[39mWake word access key unavailable: secret store is not configured.
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mthrows a validation error when the wake word access key is missing
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key not found in environment. { hasSecretStore: [33mfalse[39m }
app/main test: [90mstderr[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mloads with an empty realtime api key and marks the renderer config as unconfigured
app/main test: [22m[39mRealtime API key unavailable: secret store is not configured.
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mloads with an empty realtime api key and marks the renderer config as unconfigured
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key not found in environment. { hasSecretStore: [33mfalse[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mloads with an empty realtime api key and marks the renderer config as unconfigured
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m8[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mloads with an empty realtime api key and marks the renderer config as unconfigured
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mfalse[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreads realtime api keys from case-insensitive environment variables
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m9[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreads realtime api keys from case-insensitive environment variables
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m8[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreads realtime api keys from case-insensitive environment variables
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreads api secrets from lowercase .env keys and trims whitespace
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m12[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreads api secrets from lowercase .env keys and trims whitespace
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m13[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreads api secrets from lowercase .env keys and trims whitespace
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mupdates and persists audio device preferences
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m3[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mupdates and persists audio device preferences
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m4[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mupdates and persists audio device preferences
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mupdates secrets securely and refreshes renderer config state
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m11[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mupdates secrets securely and refreshes renderer config state
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m12[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mupdates secrets securely and refreshes renderer config state
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mupdates secrets securely and refreshes renderer config state
app/main test: [22m[39mRealtime API key updated. { length: [33m11[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mupdates secrets securely and refreshes renderer config state
app/main test: [22m[39mWake word access key updated. { length: [33m17[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mthrows when attempting to persist secrets without a configured store
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m7[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mthrows when attempting to persist secrets without a configured store
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m4[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mthrows when attempting to persist secrets without a configured store
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mtests realtime api keys using the configured OpenAI client
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m8[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mtests realtime api keys using the configured OpenAI client
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m4[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mtests realtime api keys using the configured OpenAI client
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mtests realtime api keys using the configured OpenAI client
app/main test: [22m[39mTesting realtime API key.
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreturns a helpful error when testing an unconfigured realtime api key
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key not found in environment. { hasSecretStore: [33mfalse[39m }
app/main test: [90mstderr[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreturns a helpful error when testing an unconfigured realtime api key
app/main test: [22m[39mRealtime API key unavailable: secret store is not configured.
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreturns a helpful error when testing an unconfigured realtime api key
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m8[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreturns a helpful error when testing an unconfigured realtime api key
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mfalse[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreports when no OpenAI client is available for realtime key testing
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m14[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreports when no OpenAI client is available for realtime key testing
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m8[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreports when no OpenAI client is available for realtime key testing
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreports when no OpenAI client is available for realtime key testing
app/main test: [22m[39mTesting realtime API key.
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreports HTTP failures when validating wake word access keys
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m3[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreports HTTP failures when validating wake word access keys
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m4[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreports HTTP failures when validating wake word access keys
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreports HTTP failures when validating wake word access keys
app/main test: [22m[39mTesting wake word access key.
app/main test:  [32mâœ“[39m tests/config-manager.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 43[2mms[22m[39m
app/main test: [2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
app/main test: [2m      Tests [22m [1m[32m17 passed[39m[22m[90m (17)[39m
app/main test: [2m   Start at [22m 11:26:22
app/main test: [2m   Duration [22m 1.10s[2m (transform 131ms, setup 49ms, collect 201ms, tests 43ms, environment 0ms, prepare 263ms)[22m
app/main test: âœ“ Config tests passed
app/main test: ======================================================================
app/main test: Running Preferences tests...
app/main test: ======================================================================
app/renderer test:  [32mâœ“[39m tests/App.test.tsx [2m([22m[2m16 tests[22m[2m)[22m[33m 5524[2mms[22m[39m
app/renderer test:    [33m[2mâœ“[22m[39m App component[2m > [22mrenders tab navigation and toggles panels [33m 1365[2mms[22m[39m
app/renderer test:    [33m[2mâœ“[22m[39m App component[2m > [22mrenders kiosk UI, toggles transcript overlay, and persists device preferences [33m 715[2mms[22m[39m
app/renderer test:    [33m[2mâœ“[22m[39m App component[2m > [22mallows pausing and resuming listening while disconnecting realtime sessions [33m 303[2mms[22m[39m
app/renderer test:    [33m[2mâœ“[22m[39m App component[2m > [22mupdates realtime api key via configuration form [33m 537[2mms[22m[39m
app/renderer test:    [33m[2mâœ“[22m[39m App component[2m > [22muses the latest preload bridge when submitting a secret before the hook state updates [33m 418[2mms[22m[39m
app/renderer test: [2m Test Files [22m [1m[32m13 passed[39m[22m[90m (13)[39m
app/renderer test: [2m      Tests [22m [1m[32m64 passed[39m[22m[90m (64)[39m
app/renderer test: [2m   Start at [22m 11:26:12
app/renderer test: [2m   Duration [22m 11.16s[2m (transform 2.13s, setup 4.44s, collect 6.15s, tests 8.19s, environment 34.62s, prepare 3.97s)[22m
app/renderer test: Done
app/main test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/main[39m
app/main test:  [32mâœ“[39m tests/preferences-store.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 13[2mms[22m[39m
app/main test: [2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
app/main test: [2m      Tests [22m [1m[32m2 passed[39m[22m[90m (2)[39m
app/main test: [2m   Start at [22m 11:26:24
app/main test: [2m   Duration [22m 585ms[2m (transform 58ms, setup 39ms, collect 46ms, tests 13ms, environment 0ms, prepare 154ms)[22m
app/main test: âœ“ Preferences tests passed
app/main test: ======================================================================
app/main test: Running Avatar tests...
app/main test: ======================================================================
app/main test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/main[39m
app/main test:  [32mâœ“[39m tests/avatar-animation-service.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 104[2mms[22m[39m
app/main test:  [32mâœ“[39m tests/avatar-pose-service.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 179[2mms[22m[39m
app/main test:  [32mâœ“[39m tests/avatar-model-service.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 209[2mms[22m[39m
app/main test: [2m Test Files [22m [1m[32m3 passed[39m[22m[90m (3)[39m
app/main test: [2m      Tests [22m [1m[32m26 passed[39m[22m[90m (26)[39m
app/main test: [2m   Start at [22m 11:26:25
app/main test: [2m   Duration [22m 938ms[2m (transform 212ms, setup 104ms, collect 432ms, tests 492ms, environment 1ms, prepare 639ms)[22m
app/main test: âœ“ Avatar tests passed
app/main test: ======================================================================
app/main test: Running VRMA tests...
app/main test: ======================================================================
app/main test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/main[39m
app/main test:  [32mâœ“[39m tests/vrma-converter.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 7[2mms[22m[39m
app/main test:  [32mâœ“[39m tests/vrma-schema.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 11[2mms[22m[39m
app/main test:  [32mâœ“[39m tests/vrma-generation-service.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 78[2mms[22m[39m
app/main test: [2m Test Files [22m [1m[32m3 passed[39m[22m[90m (3)[39m
app/main test: [2m      Tests [22m [1m[32m8 passed[39m[22m[90m (8)[39m
app/main test: [2m   Start at [22m 11:26:27
app/main test: [2m   Duration [22m 910ms[2m (transform 279ms, setup 135ms, collect 622ms, tests 96ms, environment 1ms, prepare 593ms)[22m
app/main test: âœ“ VRMA tests passed
app/main test: ======================================================================
app/main test: Running OpenAI tests...
app/main test: ======================================================================
app/main test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/main[39m
app/main test:  [32mâœ“[39m tests/openai-client.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 6[2mms[22m[39m
app/main test: [2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
app/main test: [2m      Tests [22m [1m[32m3 passed[39m[22m[90m (3)[39m
app/main test: [2m   Start at [22m 11:26:29
app/main test: [2m   Duration [22m 529ms[2m (transform 55ms, setup 41ms, collect 31ms, tests 6ms, environment 0ms, prepare 160ms)[22m
app/main test: âœ“ OpenAI tests passed
app/main test: ======================================================================
app/main test: Running Memory tests...
app/main test: ======================================================================
app/main test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/main[39m
app/main test:  [32mâœ“[39m tests/memory-store.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 132[2mms[22m[39m
app/main test: [2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
app/main test: [2m      Tests [22m [1m[32m6 passed[39m[22m[90m (6)[39m
app/main test: [2m   Start at [22m 11:26:31
app/main test: [2m   Duration [22m 807ms[2m (transform 94ms, setup 43ms, collect 102ms, tests 132ms, environment 0ms, prepare 152ms)[22m
app/main test: âœ“ Memory tests passed
app/main test: ======================================================================
app/main test: Running Preload tests...
app/main test: ======================================================================
app/main test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/main[39m
app/main test: [90mstdout[2m | tests/preload.test.ts[2m > [22m[2mpreload bridge[2m > [22m[2mregisters the aiembodied api with config bridge and ping helper
app/main test: [22m[39m[preload bridge] Preparing to expose renderer bridge. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m
app/main test: }
app/main test: [preload bridge] Renderer bridge exposed successfully. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m,
app/main test:   bridgeReady: [33mtrue[39m,
app/main test:   bridgeVersion: [32m'1.0.0'[39m
app/main test: }
app/main test: [90mstdout[2m | tests/preload.test.ts[2m > [22m[2mpreload bridge[2m > [22m[2mroutes config mutations and tests through ipc channels
app/main test: [22m[39m[preload bridge] Preparing to expose renderer bridge. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m
app/main test: }
app/main test: [preload bridge] Renderer bridge exposed successfully. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m,
app/main test:   bridgeReady: [33mtrue[39m,
app/main test:   bridgeVersion: [32m'1.0.0'[39m
app/main test: }
app/main test: [90mstdout[2m | tests/preload.test.ts[2m > [22m[2mpreload bridge[2m > [22m[2mprovides a wake word subscription bridge
app/main test: [22m[39m[preload bridge] Preparing to expose renderer bridge. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m
app/main test: }
app/main test: [preload bridge] Renderer bridge exposed successfully. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m,
app/main test:   bridgeReady: [33mtrue[39m,
app/main test:   bridgeVersion: [32m'1.0.0'[39m
app/main test: }
app/main test: [90mstdout[2m | tests/preload.test.ts[2m > [22m[2mpreload bridge[2m > [22m[2mexposes camera detection helpers through the bridge
app/main test: [22m[39m[preload bridge] Preparing to expose renderer bridge. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m
app/main test: }
app/main test: [preload bridge] Renderer bridge exposed successfully. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m,
app/main test:   bridgeReady: [33mtrue[39m,
app/main test:   bridgeVersion: [32m'1.0.0'[39m
app/main test: }
app/main test: [90mstdout[2m | tests/preload.test.ts[2m > [22m[2mpreload bridge[2m > [22m[2mexposes avatar model helpers through the bridge
app/main test: [22m[39m[preload bridge] Preparing to expose renderer bridge. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m
app/main test: }
app/main test: [preload bridge] Renderer bridge exposed successfully. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m,
app/main test:   bridgeReady: [33mtrue[39m,
app/main test:   bridgeVersion: [32m'1.0.0'[39m
app/main test: }
app/main test: [90mstdout[2m | tests/preload.test.ts[2m > [22m[2mpreload bridge[2m > [22m[2mexposes avatar animation helpers through the bridge
app/main test: [22m[39m[preload bridge] Preparing to expose renderer bridge. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m
app/main test: }
app/main test: [preload bridge] Renderer bridge exposed successfully. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m,
app/main test:   bridgeReady: [33mtrue[39m,
app/main test:   bridgeVersion: [32m'1.0.0'[39m
app/main test: }
app/main test:  [32mâœ“[39m tests/preload.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 47[2mms[22m[39m
app/main test: [2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
app/main test: [2m      Tests [22m [1m[32m6 passed[39m[22m[90m (6)[39m
app/main test: [2m   Start at [22m 11:26:33
app/main test: [2m   Duration [22m 586ms[2m (transform 81ms, setup 40ms, collect 49ms, tests 47ms, environment 0ms, prepare 140ms)[22m
app/main test: âœ“ Preload tests passed
app/main test: ======================================================================
app/main test: Running Main tests...
app/main test: ======================================================================
app/main test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/main[39m
app/main test:  [32mâœ“[39m tests/main.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 191[2mms[22m[39m
app/main test: [2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
app/main test: [2m      Tests [22m [1m[32m5 passed[39m[22m[90m (5)[39m
app/main test: [2m   Start at [22m 11:26:35
app/main test: [2m   Duration [22m 827ms[2m (transform 209ms, setup 41ms, collect 118ms, tests 191ms, environment 0ms, prepare 171ms)[22m
app/main test: âœ“ Main tests passed
app/main test: ======================================================================
app/main test: Running Conversation tests...
app/main test: ======================================================================
app/main test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/main[39m
app/main test:  [32mâœ“[39m tests/conversation-manager.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 10[2mms[22m[39m
app/main test: [2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
app/main test: [2m      Tests [22m [1m[32m4 passed[39m[22m[90m (4)[39m
app/main test: [2m   Start at [22m 11:26:36
app/main test: [2m   Duration [22m 661ms[2m (transform 70ms, setup 40ms, collect 52ms, tests 10ms, environment 0ms, prepare 166ms)[22m
app/main test: âœ“ Conversation tests passed
app/main test: ======================================================================
app/main test: Running Wake Word tests...
app/main test: ======================================================================
app/main test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/main[39m
app/main test:  [31mâ¯[39m tests/wake-word-service.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 93034[2mms[22m[39m
app/main test:    [32mâœ“[39m WakeWordService[2m > [22memits wake events that meet confidence threshold[32m 3[2mms[22m[39m
app/main test:    [32mâœ“[39m WakeWordService[2m > [22mfilters wake events below confidence threshold[32m 1[2mms[22m[39m
app/main test:    [32mâœ“[39m WakeWordService[2m > [22mapplies cooldown between events[32m 1[2mms[22m[39m
app/main test:    [33m[2mâœ“[22m[39m WakeWordService[2m > [22mterminates worker on dispose [33m 3008[2mms[22m[39m
app/main test:    [32mâœ“[39m WakeWordService[2m > [22mfalls back to TypeScript worker entrypoint with ts-node loader in development[32m 1[2mms[22m[39m
app/main test: [31m   [31mÃ—[31m WakeWordService[2m > [22mschedules restart when fatal error is received[39m[33m 30008[2mms[22m[39m
app/main test: [31m     â†’ Test timed out in 30000ms.
app/main test: If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
app/main test:    [32mâœ“[39m WakeWordService[2m > [22mdoes not restart when autoRestart is disabled[32m 1[2mms[22m[39m
app/main test: [31m   [31mÃ—[31m WakeWordService[2m > [22mapplies exponential backoff on repeated restarts[39m[33m 30003[2mms[22m[39m
app/main test: [31m     â†’ Test timed out in 30000ms.
app/main test: If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
app/main test: [31m   [31mÃ—[31m WakeWordService[2m > [22mresets restart attempts on successful ready[39m[33m 30005[2mms[22m[39m
app/main test: [31m     â†’ Test timed out in 30000ms.
app/main test: If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
app/main test: [31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 3 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
app/main test: [41m[1m FAIL [22m[49m tests/wake-word-service.test.ts[2m > [22mWakeWordService[2m > [22mschedules restart when fatal error is received
app/main test: [31m[1mError[22m: Test timed out in 30000ms.
app/main test: If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
app/main test: [36m [2mâ¯[22m tests/wake-word-service.test.ts:[2m181:3[22m[39m
app/main test:     [90m179| [39m  })[33m;[39m
app/main test:     [90m180| [39m
app/main test:     [90m181| [39m  [34mit[39m([32m'schedules restart when fatal error is received'[39m[33m,[39m [35masync[39m () [33m=>[39m {
app/main test:     [90m   | [39m  [31m^[39m
app/main test:     [90m182| [39m    vi[33m.[39m[34museFakeTimers[39m()[33m;[39m
app/main test:     [90m183| [39m    [35mlet[39m spawnCount [33m=[39m [34m0[39m[33m;[39m
app/main test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/3]âŽ¯[22m[39m
app/main test: [41m[1m FAIL [22m[49m tests/wake-word-service.test.ts[2m > [22mWakeWordService[2m > [22mapplies exponential backoff on repeated restarts
app/main test: [31m[1mError[22m: Test timed out in 30000ms.
app/main test: If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
app/main test: [36m [2mâ¯[22m tests/wake-word-service.test.ts:[2m273:3[22m[39m
app/main test:     [90m271| [39m  })[33m;[39m
app/main test:     [90m272| [39m
app/main test:     [90m273| [39m  [34mit[39m([32m'applies exponential backoff on repeated restarts'[39m[33m,[39m [35masync[39m () [33m=>[39m {
app/main test:     [90m   | [39m  [31m^[39m
app/main test:     [90m274| [39m    vi[33m.[39m[34museFakeTimers[39m()[33m;[39m
app/main test:     [90m275| [39m    [35mconst[39m workers[33m:[39m [33mFakeWorker[39m[] [33m=[39m [][33m;[39m
app/main test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/3]âŽ¯[22m[39m
app/main test: [41m[1m FAIL [22m[49m tests/wake-word-service.test.ts[2m > [22mWakeWordService[2m > [22mresets restart attempts on successful ready
app/main test: [31m[1mError[22m: Test timed out in 30000ms.
app/main test: If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
app/main test: [36m [2mâ¯[22m tests/wake-word-service.test.ts:[2m333:3[22m[39m
app/main test:     [90m331| [39m  })[33m;[39m
app/main test:     [90m332| [39m
app/main test:     [90m333| [39m  [34mit[39m([32m'resets restart attempts on successful ready'[39m[33m,[39m [35masync[39m () [33m=>[39m {
app/main test:     [90m   | [39m  [31m^[39m
app/main test:     [90m334| [39m    vi[33m.[39m[34museFakeTimers[39m()[33m;[39m
app/main test:     [90m335| [39m    [35mconst[39m workers[33m:[39m [33mFakeWorker[39m[] [33m=[39m [][33m;[39m
app/main test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/3]âŽ¯[22m[39m
app/main test: [2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
app/main test: [2m      Tests [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m6 passed[39m[22m[90m (9)[39m
app/main test: [2m   Start at [22m 11:26:38
app/main test: [2m   Duration [22m 93.66s[2m (transform 79ms, setup 39ms, collect 57ms, tests 93.03s, environment 0ms, prepare 207ms)[22m
app/main test: âŒ Wake Word tests failed
app/main test: Failed
C:\Users\kevin\repos\aiembodied\app\main:
â€‰ERR_PNPM_RECURSIVE_RUN_FIRST_FAILâ€‰ @aiembodied/main@0.0.1 test: `npm run test:rebuild && node scripts/test-split.mjs`
Exit status 1
â€‰ELIFECYCLEâ€‰ Test failed. See above for more details.
