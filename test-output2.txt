
> aiembodied@0.0.1 test C:\Users\kevin\repos\aiembodied
> pnpm -r test

Scope: 2 of 3 workspace projects
app/main test$ npm run test:rebuild && node scripts/test-split.mjs
app/renderer test$ vitest run
app/main test: > @aiembodied/main@0.0.1 test:rebuild
app/main test: > node scripts/test-rebuild.mjs
app/renderer test: [1m[43m DEPRECATED [49m[22m [33m"environmentMatchGlobs" is deprecated. Use `test.projects` to define different configurations instead.[39m
app/renderer test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/renderer[39m
app/main test: .../node_modules/better-sqlite3 install$ prebuild-install || node-gyp rebuild --release
app/main test: .../node_modules/better-sqlite3 install: Done
app/renderer test:  [32mÎ“Â£Ã´[39m tests/realtime/realtime-client.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 51[2mms[22m[39m
app/renderer test:  [32mÎ“Â£Ã´[39m tests/avatar/idle-scheduler.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 30[2mms[22m[39m
app/renderer test: [90mstdout[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2mqueues animations sequentially
app/renderer test: [22m[39m[vrm-avatar-renderer] T-pose detection result: [33mfalse[39m
app/renderer test: [vrm-avatar-renderer] Model not in T-pose, skipping relaxed pose adjustment
app/renderer test: [vrm-avatar-renderer] VRM scene metrics {"modelId":"vrm-1","meshCount":0,"skinnedMeshCount":0,"hiddenMeshes":0,"bounds":null,"head":null}
app/renderer test: [90mstderr[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2mqueues animations sequentially
app/renderer test: [22m[39m[vrm-avatar-renderer] Pose API unavailable, skipping default pose save
app/renderer test: [90mstderr[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2mqueues animations sequentially
app/renderer test: [22m[39m[vrm-avatar-renderer] Missing right arm bones; skipping wave animation setup.
app/renderer test: [90mstderr[2m | tests/avatar/vrm-avatar-renderer.test.tsx[2m > [22m[2mcreateRightArmWaveClip[2m > [22m[2mreturns null when humanoid mapping is missing
app/renderer test: [22m[39m[vrm-avatar-renderer] VRM humanoid is unavailable; cannot create wave animation clip.
app/renderer test: [90mstderr[2m | tests/avatar/vrm-avatar-renderer.test.tsx[2m > [22m[2msuppressOutlierMeshes[2m > [22m[2mhides meshes that exceed the max world-space size
app/renderer test: [22m[39m[vrm-avatar-renderer] Hiding oversized mesh { name: [32m''[39m, maxDim: [33m200[39m }
app/renderer test: [90mstdout[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2minvokes timing callbacks when starting playback
app/renderer test: [22m[39m[vrm-avatar-renderer] T-pose detection result: [33mfalse[39m
app/renderer test: [vrm-avatar-renderer] Model not in T-pose, skipping relaxed pose adjustment
app/renderer test: [vrm-avatar-renderer] VRM scene metrics {"modelId":"vrm-1","meshCount":0,"skinnedMeshCount":0,"hiddenMeshes":0,"bounds":null,"head":null}
app/renderer test: [90mstderr[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2minvokes timing callbacks when starting playback
app/renderer test: [22m[39m[vrm-avatar-renderer] Pose API unavailable, skipping default pose save
app/renderer test: [90mstderr[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2minvokes timing callbacks when starting playback
app/renderer test: [22m[39m[vrm-avatar-renderer] Missing right arm bones; skipping wave animation setup.
app/renderer test: [90mstdout[2m | tests/avatar/vrm-avatar-renderer.test.tsx[2m > [22m[2mVrmAvatarRenderer behavior cues[2m > [22m[2mplays a wave animation when a greet_face cue is emitted
app/renderer test: [22m[39m[vrm-avatar-renderer] T-pose detection result: [33mfalse[39m
app/renderer test: [vrm-avatar-renderer] Model not in T-pose, skipping relaxed pose adjustment
app/renderer test: [vrm-avatar-renderer] VRM scene metrics {"modelId":"vrm-1","meshCount":0,"skinnedMeshCount":0,"hiddenMeshes":0,"bounds":null,"head":null}
app/renderer test: [90mstderr[2m | tests/avatar/vrm-avatar-renderer.test.tsx[2m > [22m[2mVrmAvatarRenderer behavior cues[2m > [22m[2mplays a wave animation when a greet_face cue is emitted
app/renderer test: [22m[39m[vrm-avatar-renderer] Pose API unavailable, skipping default pose save
app/renderer test: [90mstdout[2m | tests/avatar/vrm-avatar-renderer.test.tsx[2m > [22m[2mVrmAvatarRenderer behavior cues[2m > [22m[2mplays a wave animation when a greet_face cue is emitted
app/renderer test: [22m[39m[vrm-avatar-renderer] greet_face cue triggered wave animation. { source: [32m'camera'[39m }
app/renderer test:  [32mÎ“Â£Ã´[39m tests/avatar/vrm-avatar-renderer.test.tsx [2m([22m[2m9 tests[22m[2m)[22m[32m 182[2mms[22m[39m
app/renderer test: [90mstdout[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2mholds pose animations on the final frame
app/renderer test: [22m[39m[vrm-avatar-renderer] T-pose detection result: [33mfalse[39m
app/renderer test: [vrm-avatar-renderer] Model not in T-pose, skipping relaxed pose adjustment
app/renderer test: [vrm-avatar-renderer] VRM scene metrics {"modelId":"vrm-1","meshCount":0,"skinnedMeshCount":0,"hiddenMeshes":0,"bounds":null,"head":null}
app/renderer test: [90mstderr[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2mholds pose animations on the final frame
app/renderer test: [22m[39m[vrm-avatar-renderer] Pose API unavailable, skipping default pose save
app/renderer test: [90mstderr[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2mholds pose animations on the final frame
app/renderer test: [22m[39m[vrm-avatar-renderer] Missing right arm bones; skipping wave animation setup.
app/renderer test: [90mstdout[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2mlooks up clips by slug name
app/renderer test: [22m[39m[vrm-avatar-renderer] T-pose detection result: [33mfalse[39m
app/renderer test: [vrm-avatar-renderer] Model not in T-pose, skipping relaxed pose adjustment
app/renderer test: [vrm-avatar-renderer] VRM scene metrics {"modelId":"vrm-1","meshCount":0,"skinnedMeshCount":0,"hiddenMeshes":0,"bounds":null,"head":null}
app/renderer test: [90mstderr[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2mlooks up clips by slug name
app/renderer test: [22m[39m[vrm-avatar-renderer] Pose API unavailable, skipping default pose save
app/renderer test: [90mstderr[2m | tests/avatar/vrm-animation-queue.test.tsx[2m > [22m[2mVrmAvatarRenderer animation queue[2m > [22m[2mlooks up clips by slug name
app/renderer test: [22m[39m[vrm-avatar-renderer] Missing right arm bones; skipping wave animation setup.
app/renderer test:  [32mÎ“Â£Ã´[39m tests/avatar/vrm-animation-queue.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 522[2mms[22m[39m
app/renderer test: [90mstderr[2m | tests/avatar/avatar-renderers.smoke.test.tsx[2m > [22m[2mavatar renderer smoke tests[2m > [22m[2mmounts the VRM renderer when a model is available
app/renderer test: [22m[39m[vrm-avatar-renderer] failed to load VRM model TypeError: chestWorldPos.sub is not a function
app/renderer test:     at isInTPose [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\vrm-avatar-renderer.tsx:637:34[90m)[39m
app/renderer test:     at applyRelaxedPose [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\vrm-avatar-renderer.tsx:786:19[90m)[39m
app/renderer test:     at load [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\vrm-avatar-renderer.tsx:1749:9[90m)[39m
app/renderer test: [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
app/renderer test: [90mstderr[2m | tests/avatar/avatar-renderers.smoke.test.tsx[2m > [22m[2mavatar renderer smoke tests[2m > [22m[2mloads the VRM model binary when the component mounts
app/renderer test: [22m[39m[vrm-avatar-renderer] failed to load VRM model TypeError: chestWorldPos.sub is not a function
app/renderer test:     at isInTPose [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\vrm-avatar-renderer.tsx:637:34[90m)[39m
app/renderer test:     at applyRelaxedPose [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\vrm-avatar-renderer.tsx:786:19[90m)[39m
app/renderer test:     at load [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\vrm-avatar-renderer.tsx:1749:9[90m)[39m
app/renderer test: [90m    at runNextTicks (node:internal/process/task_queues:65:5)[39m
app/renderer test: [90m    at processTimers (node:internal/timers:520:9)[39m
app/renderer test:  [32mÎ“Â£Ã´[39m tests/avatar/avatar-renderers.smoke.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[33m 1000[2mms[22m[39m
app/renderer test: [90mstdout[2m | tests/avatar/avatar-configurator.test.tsx[2m > [22m[2mAvatarConfigurator[2m > [22m[2msubmits a VRMA prompt and reports success
app/renderer test: [22m[39m[avatar configurator] Avatar bridge connected.
app/renderer test: [90mstdout[2m | tests/avatar/avatar-configurator.test.tsx[2m > [22m[2mAvatarConfigurator[2m > [22m[2mrenders VRM models with metadata and handles activation and deletion
app/renderer test: [22m[39m[avatar configurator] Avatar bridge connected.
app/renderer test: [90mstderr[2m | tests/avatar/avatar-configurator.test.tsx[2m > [22m[2mAvatarConfigurator[2m > [22m[2mrenders VRM models with metadata and handles activation and deletion
app/renderer test: [22m[39mNot implemented: HTMLCanvasElement's getContext() method: without installing the canvas npm package
app/renderer test: Not implemented: HTMLCanvasElement's getContext() method: without installing the canvas npm package
app/renderer test: THREE.WebGLRenderer: Error creating WebGL context.
app/renderer test: [90mstderr[2m | tests/avatar/avatar-configurator.test.tsx[2m > [22m[2mAvatarConfigurator[2m > [22m[2mrenders VRM models with metadata and handles activation and deletion
app/renderer test: [22m[39m[avatar-configurator] Failed to generate thumbnail for model vrm-2: Error: Error creating WebGL context.
app/renderer test:     at new WebGLRenderer (file:///C:/Users/kevin/repos/aiembodied/node_modules/[4m.pnpm[24m/three@0.182.0/node_modules/[4mthree[24m/build/three.module.js:15921:13)
app/renderer test:     at createOffscreenRenderer [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\thumbnail-generator.ts:21:20[90m)[39m
app/renderer test:     at generateVrmThumbnail [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\thumbnail-generator.ts:114:20[90m)[39m
app/renderer test:     at [90mC:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\avatar-configurator.tsx:162:39
app/renderer test: [90mstderr[2m | tests/avatar/avatar-configurator.test.tsx[2m > [22m[2mAvatarConfigurator[2m > [22m[2mrenders VRM models with metadata and handles activation and deletion
app/renderer test: [22m[39mNot implemented: HTMLCanvasElement's getContext() method: without installing the canvas npm package
app/renderer test: Not implemented: HTMLCanvasElement's getContext() method: without installing the canvas npm package
app/renderer test: THREE.WebGLRenderer: Error creating WebGL context.
app/renderer test: [90mstderr[2m | tests/avatar/avatar-configurator.test.tsx[2m > [22m[2mAvatarConfigurator[2m > [22m[2mrenders VRM models with metadata and handles activation and deletion
app/renderer test: [22m[39m[avatar-configurator] Failed to generate thumbnail for model vrm-2: Error: Error creating WebGL context.
app/renderer test:     at new WebGLRenderer (file:///C:/Users/kevin/repos/aiembodied/node_modules/[4m.pnpm[24m/three@0.182.0/node_modules/[4mthree[24m/build/three.module.js:15921:13)
app/renderer test:     at createOffscreenRenderer [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\thumbnail-generator.ts:21:20[90m)[39m
app/renderer test:     at generateVrmThumbnail [90m(C:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\thumbnail-generator.ts:114:20[90m)[39m
app/renderer test:     at [90mC:\Users\kevin\repos\aiembodied\app\renderer\[39msrc\avatar\avatar-configurator.tsx:162:39
app/renderer test: [90mstdout[2m | tests/avatar/avatar-configurator.test.tsx[2m > [22m[2mAvatarConfigurator[2m > [22m[2muploads a VRM file and surfaces metadata from the main service
app/renderer test: [22m[39m[avatar configurator] Avatar bridge connected.
app/renderer test: [90mstdout[2m | tests/avatar/avatar-configurator.test.tsx[2m > [22m[2mAvatarConfigurator[2m > [22m[2mprevents non-vrm uploads and shows validation error
app/renderer test: [22m[39m[avatar configurator] Avatar bridge connected.
app/renderer test:  [32mÎ“Â£Ã´[39m tests/avatar/avatar-configurator.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[33m 2699[2mms[22m[39m
app/renderer test:    [33m[2mÎ“Â£Ã´[22m[39m AvatarConfigurator[2m > [22msubmits a VRMA prompt and reports success [33m 884[2mms[22m[39m
app/renderer test:    [33m[2mÎ“Â£Ã´[22m[39m AvatarConfigurator[2m > [22mrenders VRM models with metadata and handles activation and deletion [33m 1054[2mms[22m[39m
app/renderer test:    [33m[2mÎ“Â£Ã´[22m[39m AvatarConfigurator[2m > [22muploads a VRM file and surfaces metadata from the main service [33m 325[2mms[22m[39m
app/renderer test:  [32mÎ“Â£Ã´[39m tests/vite-config.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
app/renderer test:  [32mÎ“Â£Ã´[39m tests/audio/viseme-driver.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 19[2mms[22m[39m
app/renderer test:  [32mÎ“Â£Ã´[39m tests/avatar/animation-tags.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 9[2mms[22m[39m
app/main test: ======================================================================
app/main test: Running Config tests...
app/main test: ======================================================================
app/renderer test:  [32mÎ“Â£Ã´[39m tests/metrics/latency-tracker.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 10[2mms[22m[39m
app/renderer test:  [32mÎ“Â£Ã´[39m tests/audio/metrics.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
app/renderer test:  [32mÎ“Â£Ã´[39m tests/audio/vad-controller.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
app/main test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/main[39m
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mvalidates and returns configuration from environment variables
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m12[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mvalidates and returns configuration from environment variables
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m13[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mvalidates and returns configuration from environment variables
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mtrue[39m,
app/main test:   audioOutputConfigured: [33mtrue[39m,
app/main test:   featureFlagCount: [33m1[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mprefers stored preferences over environment configuration
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m12[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mprefers stored preferences over environment configuration
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m13[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mprefers stored preferences over environment configuration
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mtrue[39m,
app/main test:   audioOutputConfigured: [33mtrue[39m,
app/main test:   featureFlagCount: [33m1[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mfalls back to secret store when environment variable is missing
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key not found in environment. { hasSecretStore: [33mtrue[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mfalls back to secret store when environment variable is missing
app/main test: [22m[39mRealtime API key resolved from secret store. { length: [33m10[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mfalls back to secret store when environment variable is missing
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key not found in environment. { hasSecretStore: [33mtrue[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mfalls back to secret store when environment variable is missing
app/main test: [22m[39mWake word access key resolved from secret store. { length: [33m16[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mfalls back to secret store when environment variable is missing
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mparses comma separated feature flags
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m3[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mparses comma separated feature flags
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m8[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mparses comma separated feature flags
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m3[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mparses metrics configuration from environment variables
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m3[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mparses metrics configuration from environment variables
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m8[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mparses metrics configuration from environment variables
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstderr[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mthrows a validation error when the wake word access key is missing
app/main test: [22m[39mWake word access key unavailable: secret store is not configured.
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mthrows a validation error when the wake word access key is missing
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m3[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mthrows a validation error when the wake word access key is missing
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key not found in environment. { hasSecretStore: [33mfalse[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mloads with an empty realtime api key and marks the renderer config as unconfigured
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key not found in environment. { hasSecretStore: [33mfalse[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mloads with an empty realtime api key and marks the renderer config as unconfigured
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m8[39m }
app/main test: [90mstderr[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mloads with an empty realtime api key and marks the renderer config as unconfigured
app/main test: [22m[39mRealtime API key unavailable: secret store is not configured.
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mloads with an empty realtime api key and marks the renderer config as unconfigured
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mfalse[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreads realtime api keys from case-insensitive environment variables
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m9[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreads realtime api keys from case-insensitive environment variables
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m8[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreads realtime api keys from case-insensitive environment variables
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreads api secrets from lowercase .env keys and trims whitespace
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m12[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreads api secrets from lowercase .env keys and trims whitespace
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m13[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreads api secrets from lowercase .env keys and trims whitespace
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mupdates and persists audio device preferences
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m3[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mupdates and persists audio device preferences
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m4[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mupdates and persists audio device preferences
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mupdates secrets securely and refreshes renderer config state
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m11[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mupdates secrets securely and refreshes renderer config state
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m12[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mupdates secrets securely and refreshes renderer config state
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mupdates secrets securely and refreshes renderer config state
app/main test: [22m[39mRealtime API key updated. { length: [33m11[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mupdates secrets securely and refreshes renderer config state
app/main test: [22m[39mWake word access key updated. { length: [33m17[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mthrows when attempting to persist secrets without a configured store
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m7[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mthrows when attempting to persist secrets without a configured store
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m4[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mthrows when attempting to persist secrets without a configured store
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mtests realtime api keys using the configured OpenAI client
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m8[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mtests realtime api keys using the configured OpenAI client
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m4[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mtests realtime api keys using the configured OpenAI client
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mtests realtime api keys using the configured OpenAI client
app/main test: [22m[39mTesting realtime API key.
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreturns a helpful error when testing an unconfigured realtime api key
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key not found in environment. { hasSecretStore: [33mfalse[39m }
app/main test: [90mstderr[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreturns a helpful error when testing an unconfigured realtime api key
app/main test: [22m[39mRealtime API key unavailable: secret store is not configured.
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreturns a helpful error when testing an unconfigured realtime api key
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m8[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreturns a helpful error when testing an unconfigured realtime api key
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mfalse[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreports when no OpenAI client is available for realtime key testing
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m14[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreports when no OpenAI client is available for realtime key testing
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m8[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreports when no OpenAI client is available for realtime key testing
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreports when no OpenAI client is available for realtime key testing
app/main test: [22m[39mTesting realtime API key.
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreports HTTP failures when validating wake word access keys
app/main test: [22m[39mLoading configuration from environment and secret stores.
app/main test: Resolving realtime API key from environment variables. { keys: [ [32m'REALTIME_API_KEY'[39m, [32m'realtime_api_key'[39m ] }
app/main test: Realtime API key resolved from environment variables. { length: [33m3[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreports HTTP failures when validating wake word access keys
app/main test: [22m[39mResolving wake word access key from environment variables. { keys: [ [32m'PORCUPINE_ACCESS_KEY'[39m, [32m'porcupine_access_key'[39m ] }
app/main test: Wake word access key resolved from environment variables. { length: [33m4[39m }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreports HTTP failures when validating wake word access keys
app/main test: [22m[39mConfiguration loaded. {
app/main test:   hasRealtimeApiKey: [33mtrue[39m,
app/main test:   wakeWordHasAccessKey: [33mtrue[39m,
app/main test:   audioInputConfigured: [33mfalse[39m,
app/main test:   audioOutputConfigured: [33mfalse[39m,
app/main test:   featureFlagCount: [33m0[39m
app/main test: }
app/main test: [90mstdout[2m | tests/config-manager.test.ts[2m > [22m[2mConfigManager[2m > [22m[2mreports HTTP failures when validating wake word access keys
app/main test: [22m[39mTesting wake word access key.
app/main test:  [32mÎ“Â£Ã´[39m tests/config-manager.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 76[2mms[22m[39m
app/main test: [2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
app/main test: [2m      Tests [22m [1m[32m17 passed[39m[22m[90m (17)[39m
app/main test: [2m   Start at [22m 21:55:09
app/main test: [2m   Duration [22m 1.43s[2m (transform 217ms, setup 100ms, collect 347ms, tests 76ms, environment 0ms, prepare 265ms)[22m
app/main test: Î“Â£Ã´ Config tests passed
app/main test: ======================================================================
app/main test: Running Preferences tests...
app/main test: ======================================================================
app/renderer test: [90mstdout[2m | tests/App.test.tsx[2m > [22m[2mApp component[2m > [22m[2mlogs realtime disconnect and reconnect when voice preference changes
app/renderer test: [22m[39m[RealtimeClient] Minted ephemeral token. { reason: [32m'connect'[39m }
app/renderer test:  [32mÎ“Â£Ã´[39m tests/App.test.tsx [2m([22m[2m16 tests[22m[2m)[22m[33m 9024[2mms[22m[39m
app/renderer test:    [33m[2mÎ“Â£Ã´[22m[39m App component[2m > [22mrenders tab navigation and toggles panels [33m 2216[2mms[22m[39m
app/renderer test:    [33m[2mÎ“Â£Ã´[22m[39m App component[2m > [22mcharacter tab loads the avatar configurator when active [33m 394[2mms[22m[39m
app/renderer test:    [33m[2mÎ“Â£Ã´[22m[39m App component[2m > [22mrenders the static realtime voice list without querying the API [33m 571[2mms[22m[39m
app/renderer test:    [33m[2mÎ“Â£Ã´[22m[39m App component[2m > [22mextends voice options with config and server supplied voices [33m 648[2mms[22m[39m
app/renderer test:    [33m[2mÎ“Â£Ã´[22m[39m App component[2m > [22mstages realtime session config with prompt before connecting [33m 317[2mms[22m[39m
app/renderer test:    [33m[2mÎ“Â£Ã´[22m[39m App component[2m > [22mrenders kiosk UI, toggles transcript overlay, and persists device preferences [33m 1117[2mms[22m[39m
app/renderer test:    [33m[2mÎ“Â£Ã´[22m[39m App component[2m > [22mallows pausing and resuming listening while disconnecting realtime sessions [33m 441[2mms[22m[39m
app/renderer test:    [33m[2mÎ“Â£Ã´[22m[39m App component[2m > [22mloads persisted conversation history and records new session messages [33m 341[2mms[22m[39m
app/renderer test:    [33m[2mÎ“Â£Ã´[22m[39m App component[2m > [22mupdates realtime api key via configuration form [33m 562[2mms[22m[39m
app/renderer test:    [33m[2mÎ“Â£Ã´[22m[39m App component[2m > [22muses the latest preload bridge when submitting a secret before the hook state updates [33m 545[2mms[22m[39m
app/renderer test:    [33m[2mÎ“Â£Ã´[22m[39m App component[2m > [22mreports wake word access key test failures [33m 420[2mms[22m[39m
app/renderer test:    [33m[2mÎ“Â£Ã´[22m[39m App component[2m > [22msyncs the base prompt textarea with realtime session updates [33m 343[2mms[22m[39m
app/renderer test:    [33m[2mÎ“Â£Ã´[22m[39m App component[2m > [22mlogs realtime disconnect and reconnect when voice preference changes [33m 617[2mms[22m[39m
app/renderer test: [2m Test Files [22m [1m[32m13 passed[39m[22m[90m (13)[39m
app/renderer test: [2m      Tests [22m [1m[32m64 passed[39m[22m[90m (64)[39m
app/renderer test: [2m   Start at [22m 21:54:50
app/renderer test: [2m   Duration [22m 21.56s[2m (transform 7.42s, setup 8.83s, collect 16.96s, tests 13.57s, environment 64.00s, prepare 7.16s)[22m
app/renderer test: Done
app/main test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/main[39m
app/main test:  [32mÎ“Â£Ã´[39m tests/preferences-store.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 35[2mms[22m[39m
app/main test: [2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
app/main test: [2m      Tests [22m [1m[32m2 passed[39m[22m[90m (2)[39m
app/main test: [2m   Start at [22m 21:55:13
app/main test: [2m   Duration [22m 1.27s[2m (transform 186ms, setup 129ms, collect 113ms, tests 35ms, environment 1ms, prepare 364ms)[22m
app/main test: Î“Â£Ã´ Preferences tests passed
app/main test: ======================================================================
app/main test: Running Avatar tests...
app/main test: ======================================================================
app/main test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/main[39m
app/main test:  [32mÎ“Â£Ã´[39m tests/avatar-animation-service.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 172[2mms[22m[39m
app/main test:  [32mÎ“Â£Ã´[39m tests/avatar-pose-service.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 315[2mms[22m[39m
app/main test:  [32mÎ“Â£Ã´[39m tests/avatar-model-service.test.ts [2m([22m[2m11 tests[22m[2m)[22m[33m 354[2mms[22m[39m
app/main test: [2m Test Files [22m [1m[32m3 passed[39m[22m[90m (3)[39m
app/main test: [2m      Tests [22m [1m[32m26 passed[39m[22m[90m (26)[39m
app/main test: [2m   Start at [22m 21:55:17
app/main test: [2m   Duration [22m 1.74s[2m (transform 478ms, setup 247ms, collect 941ms, tests 841ms, environment 1ms, prepare 1.24s)[22m
app/main test: Î“Â£Ã´ Avatar tests passed
app/main test: ======================================================================
app/main test: Running VRMA tests...
app/main test: ======================================================================
app/main test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/main[39m
app/main test:  [32mÎ“Â£Ã´[39m tests/vrma-converter.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 12[2mms[22m[39m
app/main test:  [32mÎ“Â£Ã´[39m tests/vrma-schema.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 19[2mms[22m[39m
app/main test:  [32mÎ“Â£Ã´[39m tests/vrma-generation-service.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 137[2mms[22m[39m
app/main test: [2m Test Files [22m [1m[32m3 passed[39m[22m[90m (3)[39m
app/main test: [2m      Tests [22m [1m[32m8 passed[39m[22m[90m (8)[39m
app/main test: [2m   Start at [22m 21:55:21
app/main test: [2m   Duration [22m 1.56s[2m (transform 367ms, setup 194ms, collect 1.01s, tests 168ms, environment 1ms, prepare 836ms)[22m
app/main test: Î“Â£Ã´ VRMA tests passed
app/main test: ======================================================================
app/main test: Running OpenAI tests...
app/main test: ======================================================================
app/main test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/main[39m
app/main test:  [32mÎ“Â£Ã´[39m tests/openai-client.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 8[2mms[22m[39m
app/main test: [2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
app/main test: [2m      Tests [22m [1m[32m3 passed[39m[22m[90m (3)[39m
app/main test: [2m   Start at [22m 21:55:25
app/main test: [2m   Duration [22m 966ms[2m (transform 108ms, setup 84ms, collect 49ms, tests 8ms, environment 0ms, prepare 279ms)[22m
app/main test: Î“Â£Ã´ OpenAI tests passed
app/main test: ======================================================================
app/main test: Running Memory tests...
app/main test: ======================================================================
app/main test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/main[39m
app/main test:  [32mÎ“Â£Ã´[39m tests/memory-store.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 286[2mms[22m[39m
app/main test: [2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
app/main test: [2m      Tests [22m [1m[32m6 passed[39m[22m[90m (6)[39m
app/main test: [2m   Start at [22m 21:55:28
app/main test: [2m   Duration [22m 1.43s[2m (transform 183ms, setup 87ms, collect 177ms, tests 286ms, environment 1ms, prepare 342ms)[22m
app/main test: Î“Â£Ã´ Memory tests passed
app/main test: ======================================================================
app/main test: Running Preload tests...
app/main test: ======================================================================
app/main test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/main[39m
app/main test: [90mstdout[2m | tests/preload.test.ts[2m > [22m[2mpreload bridge[2m > [22m[2mregisters the aiembodied api with config bridge and ping helper
app/main test: [22m[39m[preload bridge] Preparing to expose renderer bridge. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m
app/main test: }
app/main test: [preload bridge] Renderer bridge exposed successfully. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m,
app/main test:   bridgeReady: [33mtrue[39m,
app/main test:   bridgeVersion: [32m'1.0.0'[39m
app/main test: }
app/main test: [90mstdout[2m | tests/preload.test.ts[2m > [22m[2mpreload bridge[2m > [22m[2mroutes config mutations and tests through ipc channels
app/main test: [22m[39m[preload bridge] Preparing to expose renderer bridge. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m
app/main test: }
app/main test: [preload bridge] Renderer bridge exposed successfully. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m,
app/main test:   bridgeReady: [33mtrue[39m,
app/main test:   bridgeVersion: [32m'1.0.0'[39m
app/main test: }
app/main test: [90mstdout[2m | tests/preload.test.ts[2m > [22m[2mpreload bridge[2m > [22m[2mprovides a wake word subscription bridge
app/main test: [22m[39m[preload bridge] Preparing to expose renderer bridge. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m
app/main test: }
app/main test: [preload bridge] Renderer bridge exposed successfully. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m,
app/main test:   bridgeReady: [33mtrue[39m,
app/main test:   bridgeVersion: [32m'1.0.0'[39m
app/main test: }
app/main test: [90mstdout[2m | tests/preload.test.ts[2m > [22m[2mpreload bridge[2m > [22m[2mexposes camera detection helpers through the bridge
app/main test: [22m[39m[preload bridge] Preparing to expose renderer bridge. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m
app/main test: }
app/main test: [preload bridge] Renderer bridge exposed successfully. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m,
app/main test:   bridgeReady: [33mtrue[39m,
app/main test:   bridgeVersion: [32m'1.0.0'[39m
app/main test: }
app/main test: [90mstdout[2m | tests/preload.test.ts[2m > [22m[2mpreload bridge[2m > [22m[2mexposes avatar model helpers through the bridge
app/main test: [22m[39m[preload bridge] Preparing to expose renderer bridge. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m
app/main test: }
app/main test: [preload bridge] Renderer bridge exposed successfully. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m,
app/main test:   bridgeReady: [33mtrue[39m,
app/main test:   bridgeVersion: [32m'1.0.0'[39m
app/main test: }
app/main test: [90mstdout[2m | tests/preload.test.ts[2m > [22m[2mpreload bridge[2m > [22m[2mexposes avatar animation helpers through the bridge
app/main test: [22m[39m[preload bridge] Preparing to expose renderer bridge. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m
app/main test: }
app/main test: [preload bridge] Renderer bridge exposed successfully. {
app/main test:   keys: [
app/main test:     [32m'config'[39m,
app/main test:     [32m'realtime'[39m,
app/main test:     [32m'wakeWord'[39m,
app/main test:     [32m'conversation'[39m,
app/main test:     [32m'metrics'[39m,
app/main test:     [32m'avatar'[39m,
app/main test:     [32m'camera'[39m,
app/main test:     [32m'ping'[39m,
app/main test:     [32m'__bridgeReady'[39m,
app/main test:     [32m'__bridgeVersion'[39m
app/main test:   ],
app/main test:   hasAvatarBridge: [33mtrue[39m,
app/main test:   hasCameraBridge: [33mtrue[39m,
app/main test:   bridgeReady: [33mtrue[39m,
app/main test:   bridgeVersion: [32m'1.0.0'[39m
app/main test: }
app/main test:  [32mÎ“Â£Ã´[39m tests/preload.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 95[2mms[22m[39m
app/main test: [2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
app/main test: [2m      Tests [22m [1m[32m6 passed[39m[22m[90m (6)[39m
app/main test: [2m   Start at [22m 21:55:33
app/main test: [2m   Duration [22m 1.11s[2m (transform 193ms, setup 132ms, collect 104ms, tests 95ms, environment 0ms, prepare 266ms)[22m
app/main test: Î“Â£Ã´ Preload tests passed
app/main test: ======================================================================
app/main test: Running Main tests...
app/main test: ======================================================================
app/main test: [1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/kevin/repos/aiembodied/app/main[39m
app/main test:  [31mÎ“Â¥Â»[39m tests/main.test.ts [2m([22m[2m5 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 657[2mms[22m[39m
app/main test:    [33m[2mÎ“Â£Ã´[22m[39m main process bootstrap[2m > [22mquits when another instance already holds the lock [33m 412[2mms[22m[39m
app/main test: [31m   [31mâ”œÃ¹[31m main process bootstrap[2m > [22minitializes wake word service, ipc handlers, and window lifecycle on ready[39m[32m 93[2mms[22m[39m
app/main test: [31m     Î“Ã¥Ã† expected "spy" to be called 30 times, but got 31 times[39m
app/main test:    [32mÎ“Â£Ã´[39m main process bootstrap[2m > [22msurfaces configuration validation failures to the user[32m 46[2mms[22m[39m
app/main test:    [32mÎ“Â£Ã´[39m main process bootstrap[2m > [22msurfaces preload resolution failures and aborts window creation[32m 48[2mms[22m[39m
app/main test:    [32mÎ“Â£Ã´[39m main process bootstrap[2m > [22mlogs and surfaces configuration bridge registration failures[32m 52[2mms[22m[39m
app/main test: [31mÎ“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[39m[1m[41m Failed Tests 1 [49m[22m[31mÎ“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[39m
app/main test: [41m[1m FAIL [22m[49m tests/main.test.ts[2m > [22mmain process bootstrap[2m > [22minitializes wake word service, ipc handlers, and window lifecycle on ready
app/main test: [31m[1mAssertionError[22m: expected "spy" to be called 30 times, but got 31 times[39m
app/main test: [36m [2mÎ“Â¥Â»[22m tests/main.test.ts:[2m634:32[22m[39m
app/main test:     [90m632| [39m    })[33m;[39m
app/main test:     [90m633| [39m
app/main test:     [90m634| [39m    [34mexpect[39m(ipcMainMock[33m.[39mhandle)[33m.[39m[34mtoHaveBeenCalledTimes[39m([34m30[39m)[33m;[39m
app/main test:     [90m   | [39m                               [31m^[39m
app/main test:     [90m635| [39m    const handleEntries = new Map(ipcMainMock.handle.mock.calls.map(([Î“Ã‡Âª
app/main test:     [90m636| [39m
app/main test: [31m[2mÎ“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[1/1]Î“Ã„Â»[22m[39m
app/main test: [2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
app/main test: [2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m4 passed[39m[22m[90m (5)[39m
app/main test: [2m   Start at [22m 21:55:37
app/main test: [2m   Duration [22m 1.98s[2m (transform 529ms, setup 73ms, collect 283ms, tests 657ms, environment 1ms, prepare 333ms)[22m
app/main test: Î“Â¥Ã® Main tests failed
app/main test: Failed
C:\Users\kevin\repos\aiembodied\app\main:
Î“Ã‡Ã«ERR_PNPM_RECURSIVE_RUN_FIRST_FAILÎ“Ã‡Ã« @aiembodied/main@0.0.1 test: `npm run test:rebuild && node scripts/test-split.mjs`
Exit status 1
Î“Ã‡Ã«ELIFECYCLEÎ“Ã‡Ã« Test failed. See above for more details.
